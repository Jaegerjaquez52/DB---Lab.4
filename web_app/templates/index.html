{% extends "base.html" %}

{% block title %}–ì–æ–ª–æ–≤–Ω–∞{% endblock %}

{% block content %}
<div class="page-header">
    <h1>üìä –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è</h1>
</div>

{% if stats %}
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon">üë•</div>
        <div class="stat-content">
            <h3>{{ stats.total_customers }}</h3>
            <p>–ö–ª—ñ—î–Ω—Ç—ñ–≤</p>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon">üëî</div>
        <div class="stat-content">
            <h3>{{ stats.total_employees }}</h3>
            <p>–ü—Ä–∞—Ü—ñ–≤–Ω–∏–∫—ñ–≤</p>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon">üìã</div>
        <div class="stat-content">
            <h3>{{ stats.total_menu_items }}</h3>
            <p>–°—Ç—Ä–∞–≤ —É –º–µ–Ω—é</p>
        </div>
    </div>
    
    <div class="stat-card">
        <div class="stat-icon">üìù</div>
        <div class="stat-content">
            <h3>{{ stats.total_orders }}</h3>
            <p>–í—Å—å–æ–≥–æ –∑–∞–º–æ–≤–ª–µ–Ω—å</p>
        </div>
    </div>
    
    <div class="stat-card highlight">
        <div class="stat-icon">üî•</div>
        <div class="stat-content">
            <h3>{{ stats.active_orders }}</h3>
            <p>–ê–∫—Ç–∏–≤–Ω–∏—Ö –∑–∞–º–æ–≤–ª–µ–Ω—å</p>
        </div>
    </div>
    
    <div class="stat-card success">
        <div class="stat-icon">üí∞</div>
        <div class="stat-content">
            <h3>{{ "%.2f"|format(stats.total_revenue) }} –≥—Ä–Ω</h3>
            <p>–ó–∞–≥–∞–ª—å–Ω–∞ –≤–∏—Ä—É—á–∫–∞</p>
        </div>
    </div>
</div>
{% endif %}

<div class="section">
    <div class="section-header">
        <h2>üìù –û—Å—Ç–∞–Ω–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h2>
        <a href="{{ url_for('orders_list') }}" class="btn btn-secondary">–í—Å—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</a>
    </div>
    
    {% if recent_orders %}
    <div class="table-responsive">
        <table class="data-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>–ß–∞—Å</th>
                    <th>–ö–ª—ñ—î–Ω—Ç</th>
                    <th>–û—Ñ—ñ—Ü—ñ–∞–Ω—Ç</th>
                    <th>–°—Ç—ñ–ª</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–°—É–º–∞</th>
                    <th>–î—ñ—ó</th>
                </tr>
            </thead>
            <tbody>
                {% for order in recent_orders %}
                <tr>
                    <td>{{ order.order_id }}</td>
                    <td>{{ order.order_time.strftime('%d.%m.%Y %H:%M') }}</td>
                    <td>{{ order.customer_name }}</td>
                    <td>{{ order.employee_name }}</td>
                    <td>‚Ññ{{ order.table_id }} ({{ order.table_location }})</td>
                    <td><span class="badge badge-{{ order.order_status|lower }}">{{ order.order_status }}</span></td>
                    <td>{{ "%.2f"|format(order.total_amount) }} –≥—Ä–Ω</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p class="empty-state">–ó–∞–º–æ–≤–ª–µ–Ω—å –ø–æ–∫–∏ –Ω–µ–º–∞—î</p>
    {% endif %}
</div>

<div class="quick-actions">
    <h2>‚ö° –®–≤–∏–¥–∫—ñ –¥—ñ—ó</h2>
    <div class="actions-grid">
        <a href="{{ url_for('orders_add') }}" class="action-card">
            <span class="action-icon">‚ûï</span>
            <h3>–ù–æ–≤–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h3>
        </a>
        <a href="{{ url_for('menu_add') }}" class="action-card">
            <span class="action-icon">üçΩÔ∏è</span>
            <h3>–î–æ–¥–∞—Ç–∏ —Å—Ç—Ä–∞–≤—É</h3>
        </a>
        <a href="{{ url_for('customers_add') }}" class="action-card">
            <span class="action-icon">üë§</span>
            <h3>–ù–æ–≤–∏–π –∫–ª—ñ—î–Ω—Ç</h3>
        </a>
        <a href="{{ url_for('statistics') }}" class="action-card">
            <span class="action-icon">üìà</span>
            <h3>–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∑–≤—ñ—Ç–∏</h3>
        </a>
    </div>
</div>
{% endblock %}